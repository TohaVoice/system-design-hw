= Нефункциональные требования
:icons: font
:toc:

== Базовые параметры системы

**Целевые метрики нагрузки:**

- Пиковая нагрузка: 25,150 RPS
- Активные пользователи: 5M MAU
- Активные объявления: 25M
- Суточная нагрузка: 330.75M запросов
- Объем данных: ~137 TB

**Распределение нагрузки:**

- Advertisement Service (поиск): 20,000 RPS (79.5%)
- Advertisement Service (создание): 2,500 RPS (9.9%)
- User Service: 1,500 RPS (6.0%)
- Chat Service: 750 RPS (3.0%)
- Order Service: 250 RPS (1.0%)
- Payment Service: 150 RPS (0.6%)

== Требования к производительности

=== Advertisement Service
* Поиск объявлений: ≤ 300 мс (p95), ≤ 800 мс (p99)
* Фильтрация по категориям/локации: ≤ 500 мс (p95)
* Создание объявления: ≤ 2 сек (p95) с учетом обработки медиа
* Обновление объявления: ≤ 1 сек (p95)

=== User Service
* Аутентификация (JWT): ≤ 200 мс (p99)
* Загрузка профиля: ≤ 300 мс (p95)
* Регистрация пользователя: ≤ 1 сек (p95)

=== Chat Service
* Доставка сообщения: ≤ 100 мс (p95)
* Подключение WebSocket: ≤ 1 сек (p99)
* Загрузка истории чата: ≤ 500 мс (p95)

=== Order Service
* Создание заказа: ≤ 800 мс (p95)
* Подтверждение заказа: ≤ 500 мс (p95)
* Получение истории заказов: ≤ 400 мс (p95)

=== Payment Service
* Инициализация платежа: ≤ 1 сек (p95)
* Проверка статуса платежа: ≤ 300 мс (p95)
* Обработка вебхуков: ≤ 200 мс (p99)

=== Межсервисная коммуникация
* gRPC запросы между сервисами: ≤ 100 мс (p99) в пределах AZ
* HTTP запросы: ≤ 150 мс (p95)
* Задержка Kafka сообщений: ≤ 50 мс (p95)

== Требования к надежности

=== Уровни доступности (SLA)
* Advertisement Service: 99.5%
* User Service: 99.5%
* Chat Service: 99.0%
* Order Service: 99.7%
* Payment Service: 99.9%
* **Общая доступность системы: 99.9%**

=== Восстановление после сбоев
* Восстановление сервиса (перезапуск): ≤ 2 мин
* Восстановление из бэкапа (критичные данные): ≤ 15 мин
* Восстановление из бэкапа (полное): ≤ 2 часа
* Активация DR региона: ≤ 30 мин

=== Гарантии сохранения данных
* RPO: ≤ 5 минут для транзакционных данных
* RTO: ≤ 30 минут для критичных сервисов
* Гарантия отсутствия потери данных при graceful shutdown
* Транзакционная целостность для финансовых операций